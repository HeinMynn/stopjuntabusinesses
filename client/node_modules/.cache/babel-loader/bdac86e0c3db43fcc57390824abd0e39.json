{"ast":null,"code":"import { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nvar _jsxFileName = \"/Users/heinmynn/web/stopjunta/client/src/components/Admin/AddShame.js\",\n    _s = $RefreshSig$();\n\nimport axios from \"axios\";\nimport React, { useState } from \"react\";\nimport { useHistory } from \"react-router-dom\";\nimport Spinner from \"../Parts/Spinner\";\n\nfunction AddShame(props) {\n  _s();\n\n  const history = useHistory();\n  const [msg, setMsg] = useState(\"\");\n  const [errors, setErrors] = useState([]);\n  const token = localStorage.getItem(\"token\");\n  const [imageURL, setImageURL] = useState(\"\");\n  const [proofImgs, setProofImgs] = useState([]);\n  const [picLoading, setPicLoading] = useState(false);\n  const [newShame, setNewShame] = useState({\n    name: \"\",\n    mmName: \"\",\n    designation: \"\",\n    department: \"\",\n    profile: \"\",\n    caseLink: \"\",\n    imgURL: imageURL,\n    remark: \"\",\n    proof: proofImgs,\n    proof2: \"\"\n  });\n\n  function handleChange(e) {\n    setNewShame({ ...newShame,\n      [e.target.name]: e.target.value\n    });\n  }\n\n  const proofImgsHandler = e => {\n    e.preventDefault();\n    setPicLoading(true);\n    const proof = e.target.files[0];\n    const proofData = new FormData();\n    proofData.append(\"file\", proof);\n    axios.post(\"https://mm010221.herokuapp.com/newsletter/imageupload\", proofData).then(response => {\n      setPicLoading(false);\n      setProofImgs([response.data.data, ...proofImgs]);\n      setNewShame({ ...newShame,\n        proof: proofImgs\n      });\n    });\n  };\n\n  const imageUploadHandler = e => {\n    e.preventDefault();\n    setPicLoading(true);\n    const image = e.target.files[0];\n    const data = new FormData();\n    data.append(\"file\", image);\n    axios.post(\"https://mm010221.herokuapp.com/newsletter/imageupload\", data).then(response => {\n      setPicLoading(false);\n      setImageURL(response.data.data);\n      setNewShame({ ...newShame,\n        imgURL: response.data.data\n      });\n    });\n  };\n\n  console.log(newShame);\n\n  function handleSubmit(e) {\n    e.preventDefault();\n    const headers = {\n      headers: {\n        authorization: token\n      }\n    };\n    axios.post(\"https://mm010221.herokuapp.com/shame/add\", {\n      name: newShame.name,\n      mmName: newShame.mmName,\n      designation: newShame.designation,\n      department: newShame.department,\n      profile: newShame.profile,\n      caseLink: newShame.caseLink,\n      imgURL: imageURL,\n      remark: newShame.remark,\n      proof: proofImgs,\n      proof2: newShame.proof2\n    }, headers).then(res => {\n      // localStorage.setItem(\"token\", res.data.token);\n      setMsg(res.data.newShame);\n      console.log(res);\n      history.push(\"/admin/addshame\");\n      setNewShame({ ...newShame,\n        name: \"\",\n        mmName: \"\",\n        designation: \"\",\n        department: \"\",\n        profile: \"\",\n        caseLink: \"\",\n        remark: \"\",\n        proof2: \"\"\n      });\n      setImageURL(\"\");\n      setProofImgs([]);\n    }).catch(err => {\n      if (err.response) {\n        setErrors(err.response.data);\n        console.log(err.response);\n      }\n    });\n  }\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"formWrapper w-full md:w-1/3 mx-auto px-4\",\n      children: [msg ? /*#__PURE__*/_jsxDEV(\"span\", {\n        className: \"bg-green-800 text-white px-4 py-2 rounded-md mt-1 block\",\n        children: msg\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 115,\n        columnNumber: 11\n      }, this) : \"\", /*#__PURE__*/_jsxDEV(\"form\", {\n        onSubmit: handleSubmit,\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          htmlFor: \"name\",\n          children: [\"Name\", /*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"text\",\n            name: \"name\",\n            className: \"w-full border focus:outline-none px-2 rounded-md h-8\",\n            onChange: handleChange,\n            value: newShame.name\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 124,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 122,\n          columnNumber: 11\n        }, this), errors.name ? /*#__PURE__*/_jsxDEV(\"span\", {\n          className: \"bg-red-400 text-white px-4 py-2 rounded-md mt-1 block\",\n          children: errors.name\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 133,\n          columnNumber: 13\n        }, this) : \"\", /*#__PURE__*/_jsxDEV(\"label\", {\n          htmlFor: \"mmName\",\n          children: [\"Name (in Myanmar)\", /*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"text\",\n            name: \"mmName\",\n            className: \"w-full border focus:outline-none px-2 rounded-md h-8\",\n            onChange: handleChange,\n            value: newShame.mmName\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 141,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 139,\n          columnNumber: 11\n        }, this), errors.mmName ? /*#__PURE__*/_jsxDEV(\"span\", {\n          className: \"bg-red-400 text-white px-4 py-2 rounded-md mt-1 block\",\n          children: errors.mmName\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 150,\n          columnNumber: 13\n        }, this) : \"\", /*#__PURE__*/_jsxDEV(\"label\", {\n          htmlFor: \"designation\",\n          children: [\"Designation\", /*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"text\",\n            name: \"designation\",\n            className: \"w-full border focus:outline-none px-2 rounded-md h-8\",\n            onChange: handleChange,\n            value: newShame.designation\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 158,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 156,\n          columnNumber: 11\n        }, this), errors.designation ? /*#__PURE__*/_jsxDEV(\"span\", {\n          className: \"bg-red-400 text-white px-4 py-2 rounded-md mt-1 block\",\n          children: errors.designation\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 167,\n          columnNumber: 13\n        }, this) : \"\", /*#__PURE__*/_jsxDEV(\"label\", {\n          htmlFor: \"department\",\n          children: [\"Department\", /*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"text\",\n            name: \"department\",\n            className: \"w-full border focus:outline-none px-2 rounded-md h-8\",\n            onChange: handleChange,\n            value: newShame.department\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 175,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 173,\n          columnNumber: 11\n        }, this), errors.department ? /*#__PURE__*/_jsxDEV(\"span\", {\n          className: \"bg-red-400 text-white px-4 py-2 rounded-md mt-1 block\",\n          children: errors.department\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 184,\n          columnNumber: 13\n        }, this) : \"\", /*#__PURE__*/_jsxDEV(\"label\", {\n          htmlFor: \"profile\",\n          children: [\"Profile\", /*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"text\",\n            name: \"profile\",\n            className: \"w-full border focus:outline-none px-2 rounded-md h-8\",\n            onChange: handleChange,\n            value: newShame.profile\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 192,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 190,\n          columnNumber: 11\n        }, this), errors.profile ? /*#__PURE__*/_jsxDEV(\"span\", {\n          className: \"bg-red-400 text-white px-4 py-2 rounded-md mt-1 block\",\n          children: errors.profile\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 201,\n          columnNumber: 13\n        }, this) : \"\", /*#__PURE__*/_jsxDEV(\"label\", {\n          htmlFor: \"caseLink\",\n          children: [\"Case Link\", /*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"text\",\n            name: \"caseLink\",\n            className: \"w-full border focus:outline-none px-2 rounded-md h-8\",\n            onChange: handleChange,\n            value: newShame.caseLink\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 209,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 207,\n          columnNumber: 11\n        }, this), errors.caseLink ? /*#__PURE__*/_jsxDEV(\"span\", {\n          className: \"bg-red-400 text-white px-4 py-2 rounded-md mt-1 block\",\n          children: errors.caseLink\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 218,\n          columnNumber: 13\n        }, this) : \"\", picLoading ? /*#__PURE__*/_jsxDEV(Spinner, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 225,\n          columnNumber: 25\n        }, this) : null, imageURL ? /*#__PURE__*/_jsxDEV(\"img\", {\n          src: imageURL,\n          alt: \"your pic\",\n          style: {\n            marginTop: \"1rem\",\n            height: 150\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 227,\n          columnNumber: 13\n        }, this) : null, /*#__PURE__*/_jsxDEV(\"label\", {\n          htmlFor: \"contained-button-file\",\n          children: [/*#__PURE__*/_jsxDEV(\"input\", {\n            accept: \"image/*\",\n            style: {\n              display: \"none\"\n            },\n            id: \"contained-button-file\",\n            multiple: true,\n            type: \"file\",\n            onChange: imageUploadHandler\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 235,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"bg-black hover:bg-blue-700 text-white font-bold py-2 px-4 rounded\",\n            children: \"\\u1013\\u102B\\u1010\\u103A\\u1015\\u102F\\u1036\\u1010\\u1004\\u103A\\u1019\\u100A\\u103A\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 243,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 234,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n          htmlFor: \"remark\",\n          children: [\"Remark\", /*#__PURE__*/_jsxDEV(\"textarea\", {\n            name: \"remark\",\n            id: \"remark\",\n            cols: \"30\",\n            rows: \"10\",\n            className: \"w-full border focus:outline-none px-2 rounded-md\",\n            onChange: handleChange,\n            value: newShame.remark\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 249,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 247,\n          columnNumber: 11\n        }, this), picLoading ? /*#__PURE__*/_jsxDEV(Spinner, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 259,\n          columnNumber: 25\n        }, this) : null, /*#__PURE__*/_jsxDEV(\"label\", {\n          htmlFor: \"proof-button\",\n          children: [/*#__PURE__*/_jsxDEV(\"input\", {\n            accept: \"image/*\",\n            style: {\n              display: \"none\"\n            },\n            id: \"proof-button\",\n            multiple: true,\n            type: \"file\",\n            onChange: proofImgsHandler\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 270,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"bg-black hover:bg-blue-700 text-white font-bold py-2 px-4 rounded\",\n            children: \"Proofs\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 278,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 269,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n          htmlFor: \"proof2\",\n          children: [\"Video Proof Link (if any)\", /*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"text\",\n            name: \"proof2\",\n            className: \"w-full border focus:outline-none px-2 rounded-md h-8\",\n            onChange: handleChange,\n            value: newShame.proof2\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 284,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 282,\n          columnNumber: 11\n        }, this), errors.proof2 ? /*#__PURE__*/_jsxDEV(\"span\", {\n          className: \"bg-red-400 text-white px-4 py-2 rounded-md mt-1 block\",\n          children: errors.proof2\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 293,\n          columnNumber: 13\n        }, this) : \"\", /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"submit\",\n          value: \"Add Shame\",\n          className: \"px-6 py-2 mt-2 rounded-md bg-red-400 text-white hover:bg-red-800 cursor-pointer\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 299,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 121,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 113,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 112,\n    columnNumber: 5\n  }, this);\n}\n\n_s(AddShame, \"cQeyOYUaf2qClY4hi51jenA473A=\", false, function () {\n  return [useHistory];\n});\n\n_c = AddShame;\nexport default AddShame;\n\nvar _c;\n\n$RefreshReg$(_c, \"AddShame\");","map":{"version":3,"sources":["/Users/heinmynn/web/stopjunta/client/src/components/Admin/AddShame.js"],"names":["axios","React","useState","useHistory","Spinner","AddShame","props","history","msg","setMsg","errors","setErrors","token","localStorage","getItem","imageURL","setImageURL","proofImgs","setProofImgs","picLoading","setPicLoading","newShame","setNewShame","name","mmName","designation","department","profile","caseLink","imgURL","remark","proof","proof2","handleChange","e","target","value","proofImgsHandler","preventDefault","files","proofData","FormData","append","post","then","response","data","imageUploadHandler","image","console","log","handleSubmit","headers","authorization","res","push","catch","err","marginTop","height","display"],"mappings":"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","sourcesContent":["import axios from \"axios\";\nimport React, { useState } from \"react\";\nimport { useHistory } from \"react-router-dom\";\nimport Spinner from \"../Parts/Spinner\";\n\nfunction AddShame(props) {\n  const history = useHistory();\n  const [msg, setMsg] = useState(\"\");\n  const [errors, setErrors] = useState([]);\n  const token = localStorage.getItem(\"token\");\n  const [imageURL, setImageURL] = useState(\"\");\n  const [proofImgs, setProofImgs] = useState([]);\n  const [picLoading, setPicLoading] = useState(false);\n  const [newShame, setNewShame] = useState({\n    name: \"\",\n    mmName: \"\",\n    designation: \"\",\n    department: \"\",\n    profile: \"\",\n    caseLink: \"\",\n    imgURL: imageURL,\n    remark: \"\",\n    proof: proofImgs,\n    proof2: \"\",\n  });\n\n  function handleChange(e) {\n    setNewShame({ ...newShame, [e.target.name]: e.target.value });\n  }\n\n  const proofImgsHandler = (e) => {\n    e.preventDefault();\n    setPicLoading(true);\n    const proof = e.target.files[0];\n    const proofData = new FormData();\n    proofData.append(\"file\", proof);\n    axios\n      .post(\"https://mm010221.herokuapp.com/newsletter/imageupload\", proofData)\n      .then((response) => {\n        setPicLoading(false);\n        setProofImgs([response.data.data, ...proofImgs]);\n        setNewShame({ ...newShame, proof: proofImgs });\n      });\n  };\n\n  const imageUploadHandler = (e) => {\n    e.preventDefault();\n    setPicLoading(true);\n    const image = e.target.files[0];\n    const data = new FormData();\n    data.append(\"file\", image);\n    axios\n      .post(\"https://mm010221.herokuapp.com/newsletter/imageupload\", data)\n      .then((response) => {\n        setPicLoading(false);\n        setImageURL(response.data.data);\n        setNewShame({ ...newShame, imgURL: response.data.data });\n      });\n  };\n\n  console.log(newShame);\n  function handleSubmit(e) {\n    e.preventDefault();\n\n    const headers = {\n      headers: { authorization: token },\n    };\n    axios\n      .post(\n        \"https://mm010221.herokuapp.com/shame/add\",\n        {\n          name: newShame.name,\n          mmName: newShame.mmName,\n          designation: newShame.designation,\n          department: newShame.department,\n          profile: newShame.profile,\n          caseLink: newShame.caseLink,\n          imgURL: imageURL,\n          remark: newShame.remark,\n          proof: proofImgs,\n          proof2: newShame.proof2,\n        },\n        headers\n      )\n      .then((res) => {\n        // localStorage.setItem(\"token\", res.data.token);\n        setMsg(res.data.newShame);\n        console.log(res);\n        history.push(\"/admin/addshame\");\n        setNewShame({\n          ...newShame,\n          name: \"\",\n          mmName: \"\",\n          designation: \"\",\n          department: \"\",\n          profile: \"\",\n          caseLink: \"\",\n          remark: \"\",\n          proof2: \"\",\n        });\n        setImageURL(\"\");\n        setProofImgs([]);\n      })\n      .catch((err) => {\n        if (err.response) {\n          setErrors(err.response.data);\n          console.log(err.response);\n        }\n      });\n  }\n  return (\n    <div>\n      <div className=\"formWrapper w-full md:w-1/3 mx-auto px-4\">\n        {msg ? (\n          <span className=\"bg-green-800 text-white px-4 py-2 rounded-md mt-1 block\">\n            {msg}\n          </span>\n        ) : (\n          \"\"\n        )}\n        <form onSubmit={handleSubmit}>\n          <label htmlFor=\"name\">\n            Name\n            <input\n              type=\"text\"\n              name=\"name\"\n              className=\"w-full border focus:outline-none px-2 rounded-md h-8\"\n              onChange={handleChange}\n              value={newShame.name}\n            />\n          </label>\n          {errors.name ? (\n            <span className=\"bg-red-400 text-white px-4 py-2 rounded-md mt-1 block\">\n              {errors.name}\n            </span>\n          ) : (\n            \"\"\n          )}\n          <label htmlFor=\"mmName\">\n            Name (in Myanmar)\n            <input\n              type=\"text\"\n              name=\"mmName\"\n              className=\"w-full border focus:outline-none px-2 rounded-md h-8\"\n              onChange={handleChange}\n              value={newShame.mmName}\n            />\n          </label>\n          {errors.mmName ? (\n            <span className=\"bg-red-400 text-white px-4 py-2 rounded-md mt-1 block\">\n              {errors.mmName}\n            </span>\n          ) : (\n            \"\"\n          )}\n          <label htmlFor=\"designation\">\n            Designation\n            <input\n              type=\"text\"\n              name=\"designation\"\n              className=\"w-full border focus:outline-none px-2 rounded-md h-8\"\n              onChange={handleChange}\n              value={newShame.designation}\n            />\n          </label>\n          {errors.designation ? (\n            <span className=\"bg-red-400 text-white px-4 py-2 rounded-md mt-1 block\">\n              {errors.designation}\n            </span>\n          ) : (\n            \"\"\n          )}\n          <label htmlFor=\"department\">\n            Department\n            <input\n              type=\"text\"\n              name=\"department\"\n              className=\"w-full border focus:outline-none px-2 rounded-md h-8\"\n              onChange={handleChange}\n              value={newShame.department}\n            />\n          </label>\n          {errors.department ? (\n            <span className=\"bg-red-400 text-white px-4 py-2 rounded-md mt-1 block\">\n              {errors.department}\n            </span>\n          ) : (\n            \"\"\n          )}\n          <label htmlFor=\"profile\">\n            Profile\n            <input\n              type=\"text\"\n              name=\"profile\"\n              className=\"w-full border focus:outline-none px-2 rounded-md h-8\"\n              onChange={handleChange}\n              value={newShame.profile}\n            />\n          </label>\n          {errors.profile ? (\n            <span className=\"bg-red-400 text-white px-4 py-2 rounded-md mt-1 block\">\n              {errors.profile}\n            </span>\n          ) : (\n            \"\"\n          )}\n          <label htmlFor=\"caseLink\">\n            Case Link\n            <input\n              type=\"text\"\n              name=\"caseLink\"\n              className=\"w-full border focus:outline-none px-2 rounded-md h-8\"\n              onChange={handleChange}\n              value={newShame.caseLink}\n            />\n          </label>\n          {errors.caseLink ? (\n            <span className=\"bg-red-400 text-white px-4 py-2 rounded-md mt-1 block\">\n              {errors.caseLink}\n            </span>\n          ) : (\n            \"\"\n          )}\n\n          {picLoading ? <Spinner /> : null}\n          {imageURL ? (\n            <img\n              src={imageURL}\n              alt=\"your pic\"\n              style={{ marginTop: \"1rem\", height: 150 }}\n            />\n          ) : null}\n\n          <label htmlFor=\"contained-button-file\">\n            <input\n              accept=\"image/*\"\n              style={{ display: \"none\" }}\n              id=\"contained-button-file\"\n              multiple\n              type=\"file\"\n              onChange={imageUploadHandler}\n            />\n            <div className=\"bg-black hover:bg-blue-700 text-white font-bold py-2 px-4 rounded\">\n              ဓါတ်ပုံတင်မည်\n            </div>\n          </label>\n          <label htmlFor=\"remark\">\n            Remark\n            <textarea\n              name=\"remark\"\n              id=\"remark\"\n              cols=\"30\"\n              rows=\"10\"\n              className=\"w-full border focus:outline-none px-2 rounded-md\"\n              onChange={handleChange}\n              value={newShame.remark}\n            ></textarea>\n          </label>\n          {picLoading ? <Spinner /> : null}\n          {/* {proofImgs &&\n            proofImgs.map((url) => (\n              <img\n                src={url}\n                alt=\"\"\n                style={{ marginTop: \"1rem\", height: 150 }}\n              />\n            ))} */}\n\n          <label htmlFor=\"proof-button\">\n            <input\n              accept=\"image/*\"\n              style={{ display: \"none\" }}\n              id=\"proof-button\"\n              multiple\n              type=\"file\"\n              onChange={proofImgsHandler}\n            />\n            <div className=\"bg-black hover:bg-blue-700 text-white font-bold py-2 px-4 rounded\">\n              Proofs\n            </div>\n          </label>\n          <label htmlFor=\"proof2\">\n            Video Proof Link (if any)\n            <input\n              type=\"text\"\n              name=\"proof2\"\n              className=\"w-full border focus:outline-none px-2 rounded-md h-8\"\n              onChange={handleChange}\n              value={newShame.proof2}\n            />\n          </label>\n          {errors.proof2 ? (\n            <span className=\"bg-red-400 text-white px-4 py-2 rounded-md mt-1 block\">\n              {errors.proof2}\n            </span>\n          ) : (\n            \"\"\n          )}\n          <input\n            type=\"submit\"\n            value=\"Add Shame\"\n            className=\"px-6 py-2 mt-2 rounded-md bg-red-400 text-white hover:bg-red-800 cursor-pointer\"\n          />\n        </form>\n      </div>\n    </div>\n  );\n}\n\nexport default AddShame;\n"]},"metadata":{},"sourceType":"module"}